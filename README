== Machine

Macbook Pro
2.4 Ghz Intel Core 2 Duo
4GB 1067 MHz DDR3

MySQL 5.1.41 Community Server
MongoDB 1.8.1
Ruby 1.9.2p180


== Limitation

Current benchmark code run a for loop to create / destroy votes sequently.
It does not utilize database 100%.


== Without additional indexing

./run.rb active_record skip_additional_indexes
./run.rb naive_mongoid skip_additional_indexes
./run.rb voteable_mongoid skip_additional_indexes


ActiveRecordSolution: creating 10000 votes ...
      user     system      total        real
 29.610000   2.170000  31.780000 ( 52.534653)

ActiveRecordSolution: unvoting 10000 votes ...
      user     system      total        real
 20.080000   1.950000  22.030000 ( 40.175906)


NaiveMongoidSolution: creating 10000 votes ...
      user     system      total        real
 21.760000   1.510000  23.270000 ( 30.547010)

NaiveMongoidSolution: unvoting 10000 votes ...
      user     system      total        real
 18.860000   1.440000  20.300000 ( 25.269255)


VoteableMongoidSolution: creating 10000 votes ...
      user     system      total        real
  6.050000   0.340000   6.390000 ( 13.391298)

VoteableMongoidSolution: unvoting 10000 votes ...
      user     system      total        real
  1.800000   0.130000   1.930000 (  2.085269)


== With additional indexing

./run.rb active_record
./run.rb naive_mongoid
./run.rb voteable_mongoid


ActiveRecordSolution: creating 10000 votes ...
      user     system      total        real
 28.840000   2.130000  30.970000 ( 51.070650)

ActiveRecordSolution: unvoting 10000 votes ...
      user     system      total        real
 20.320000   2.020000  22.340000 ( 41.701261)


NaiveMongoidSolution: creating 10000 votes ...
      user     system      total        real
 43.300000   3.820000  47.120000 ( 62.293679)

NaiveMongoidSolution: unvoting 10000 votes ...
      user     system      total        real
 40.420000   3.790000  44.210000 ( 57.840167)


VoteableMongoidSolution: creating 10000 votes ...
      user     system      total        real
 20.490000   2.050000  22.540000 ( 38.970604)

VoteableMongoidSolution: unvoting 10000 votes ...
      user     system      total        real
 16.230000   1.820000  18.050000 ( 25.732336)
